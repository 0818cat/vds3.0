<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VDS 3.0 Component Gallery - Input Fields</title>
    <link rel="stylesheet" as="style" crossorigin
        href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css" />
    <link rel="stylesheet" href="showroom.css">
    <script src="assets/js/icons.js"></script>
</head>

<body>
    <header class="showroom-header">
        <div class="header-left">
            <span class="logo">VDS 3.0 Gallery</span>
        </div>
        <div class="header-right">
            <button id="theme-toggle" class="btn-theme-toggle" title="ÌÖåÎßà Ï†ÑÌôò">üåì</button>
        </div>
    </header>

    <div class="app-container">
        <aside class="sidebar">
            <nav class="sidebar-nav">
                <div class="sidebar-title">Components</div>
                <ul class="sidebar-menu">
                    <li><a href="buttons.html" class="sidebar-link">Buttons</a></li>
                    <li><a href="icon-buttons.html" class="sidebar-link">Icon Buttons</a></li>
                    <li><a href="input-fields.html" class="sidebar-link active">Input Fields</a></li>
                    <li><a href="textarea.html" class="sidebar-link">Textarea</a></li>
                    <li><a href="dropdowns.html" class="sidebar-link">Dropdowns</a></li>
                    <li><a href="menus.html" class="sidebar-link">Menus</a></li>
                    <li><a href="tabs.html" class="sidebar-link">Tabs</a></li>
                    <li><a href="segmented-controls.html" class="sidebar-link">SegmentedControl</a></li>
                    <li><a href="chips.html" class="sidebar-link">Chips</a></li>
                    <li><a href="toasts.html" class="sidebar-link">Toasts</a></li>
                </ul>
            </nav>
        </aside>

        <main class="showroom-main">
            <section class="component-section playground-section">
                <h2 class="section-title">Interactive Playground</h2>
                <p class="section-desc">Îã§ÏñëÌïú ÏòµÏÖòÏùÑ Ï°∞Ìï©ÌïòÏó¨ Ïù∏Ìíã ÌïÑÎìúÎ•º ÌÖåÏä§Ìä∏Ìï¥Î≥¥ÏÑ∏Ïöî.</p>

                <div class="playground-container">
                    <div class="preview-area">
                        <div class="preview-canvas">
                            <div id="playground-input-container" class="input input--large" style="max-width: 400px;">
                                <div class="input__container">
                                    <input type="text" class="input__input" placeholder="Placeholder Text"
                                        id="pg-input">
                                </div>
                                <p class="input__helper-text" id="pg-helper">Helper text goes here</p>
                            </div>
                        </div>
                    </div>
                    <div class="controls-area">
                        <div class="control-group">
                            <label class="control-label">Size</label>
                            <div class="toggle-group" id="size-toggles">
                                <button class="toggle-btn active" data-value="input--large">L (48)</button>
                                <button class="toggle-btn" data-value="input--medium">M (40)</button>
                                <button class="toggle-btn" data-value="input--small">S (32)</button>
                            </div>
                        </div>

                        <div class="control-group">
                            <label class="control-label">Status</label>
                            <div class="checkbox-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="state-disabled"> Disabled
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" id="state-error"> Error
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" id="state-success"> Success
                                </label>
                            </div>
                        </div>

                        <div class="control-group">
                            <label class="control-label">Options</label>
                            <div class="checkbox-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="opt-icon"> Leading Icon
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" id="opt-clear" checked> Clear Icon
                                </label>
                            </div>
                        </div>

                        <div class="control-group">
                            <label class="control-label">Content</label>
                            <div style="display: flex; flex-direction: column; gap: 8px;">
                                <input type="text" id="input-placeholder" class="control-select"
                                    placeholder="Placeholder Text" value="Placeholder Text" style="padding: 8px;">
                                <input type="text" id="input-helper" class="control-select" placeholder="Helper Text"
                                    value="Helper text goes here" style="padding: 8px;">
                            </div>
                        </div>
                    </div>
                </div>

                <div class="code-viewer">
                    <pre><code id="generated-code"></code></pre>
                    <button class="copy-btn" id="copy-code-btn" title="Copy Code">
                        <div data-icon="ic_copy"></div>
                    </button>
                </div>
            </section>

            <section class="component-section" id="all-variants">
                <h2 class="section-title">Input Field Components</h2>
                <p class="section-desc">VDSÏùò ÌÖçÏä§Ìä∏ ÏûÖÎ†• ÏãúÏä§ÌÖúÏûÖÎãàÎã§.</p>

                <div class="gallery-grid"
                    style="display: grid; grid-template-columns: 100px 1fr 1fr 1fr; gap: 40px; align-items: start;">
                    <!-- Header -->
                    <div></div>
                    <div class="grid-header">Large (48px)</div>
                    <div class="grid-header">Medium (40px)</div>
                    <div class="grid-header">Small (32px)</div>

                    <!-- Normal State -->
                    <div class="grid-side-label">Normal</div>
                    <div class="input input--large">
                        <div class="input__container">
                            <input type="text" class="input__input" placeholder="Placeholder">
                        </div>
                        <p class="input__helper-text">Helper text</p>
                    </div>
                    <div class="input input--medium">
                        <div class="input__container">
                            <input type="text" class="input__input" placeholder="Placeholder">
                        </div>
                        <p class="input__helper-text">Helper text</p>
                    </div>
                    <div class="input input--small">
                        <div class="input__container">
                            <input type="text" class="input__input" placeholder="Placeholder">
                        </div>
                        <p class="input__helper-text">Helper text</p>
                    </div>

                    <!-- With Icon -->
                    <div class="grid-side-label">With Icon</div>
                    <div class="input input--large">
                        <div class="input__container">
                            <div class="input__icon" data-icon="ic_search"></div>
                            <input type="text" class="input__input" placeholder="Search...">
                        </div>
                        <p class="input__helper-text">Helper text</p>
                    </div>
                    <div class="input input--medium">
                        <div class="input__container">
                            <div class="input__icon" data-icon="ic_search"></div>
                            <input type="text" class="input__input" placeholder="Search...">
                        </div>
                        <p class="input__helper-text">Helper text</p>
                    </div>
                    <div class="input input--small">
                        <div class="input__container">
                            <div class="input__icon" data-icon="ic_search"></div>
                            <input type="text" class="input__input" placeholder="Search...">
                        </div>
                        <p class="input__helper-text">Helper text</p>
                    </div>

                    <!-- With Clear Icon -->
                    <div class="grid-side-label">Clear Icon</div>
                    <div class="input input--large">
                        <div class="input__container">
                            <input type="text" class="input__input" value="Text to clear">
                            <div class="input__clear-icon"></div>
                        </div>
                        <p class="input__helper-text">Helper text</p>
                    </div>
                    <div class="input input--medium">
                        <div class="input__container">
                            <input type="text" class="input__input" value="Text to clear">
                            <div class="input__clear-icon"></div>
                        </div>
                        <p class="input__helper-text">Helper text</p>
                    </div>
                    <div class="input input--small">
                        <div class="input__container">
                            <input type="text" class="input__input" value="Text to clear">
                            <div class="input__clear-icon"></div>
                        </div>
                        <p class="input__helper-text">Helper text</p>
                    </div>

                    <!-- Error State -->
                    <div class="grid-side-label">Error</div>
                    <div class="input input--large input--error">
                        <div class="input__container">
                            <input type="text" class="input__input" value="Invalid text">
                        </div>
                        <p class="input__helper-text">Error message here</p>
                    </div>
                    <div class="input input--medium input--error">
                        <div class="input__container">
                            <input type="text" class="input__input" value="Invalid text">
                        </div>
                        <p class="input__helper-text">Error message here</p>
                    </div>
                    <div class="input input--small input--error">
                        <div class="input__container">
                            <input type="text" class="input__input" value="Invalid text">
                        </div>
                        <p class="input__helper-text">Error message here</p>
                    </div>

                    <!-- Success State -->
                    <div class="grid-side-label">Success</div>
                    <div class="input input--large input--success">
                        <div class="input__container">
                            <input type="text" class="input__input" value="Valid text">
                        </div>
                        <p class="input__helper-text">Success message here</p>
                    </div>
                    <div class="input input--medium input--success">
                        <div class="input__container">
                            <input type="text" class="input__input" value="Valid text">
                        </div>
                        <p class="input__helper-text">Success message here</p>
                    </div>
                    <div class="input input--small input--success">
                        <div class="input__container">
                            <input type="text" class="input__input" value="Valid text">
                        </div>
                        <p class="input__helper-text">Success message here</p>
                    </div>

                    <!-- Disabled State -->
                    <div class="grid-side-label">Disabled</div>
                    <div class="input input--large input--disabled">
                        <div class="input__container">
                            <input type="text" class="input__input" disabled value="Disabled content">
                        </div>
                        <p class="input__helper-text">Helper text</p>
                    </div>
                    <div class="input input--medium input--disabled">
                        <div class="input__container">
                            <input type="text" class="input__input" disabled value="Disabled content">
                        </div>
                        <p class="input__helper-text">Helper text</p>
                    </div>
                    <div class="input input--small input--disabled">
                        <div class="input__container">
                            <input type="text" class="input__input" disabled value="Disabled content">
                        </div>
                        <p class="input__helper-text">Helper text</p>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <script src="assets/js/theme.js"></script>
    <script>
        // Global Event Listener to toggle .has-content class
        function toggleHasContent(input) {
            const container = input.closest('.input');
            if (container) {
                if (input.value.length > 0) {
                    container.classList.add('has-content');
                } else {
                    container.classList.remove('has-content');
                }
            }
        }

        document.addEventListener('input', (e) => {
            if (e.target.matches('.input__input')) {
                toggleHasContent(e.target);
            }
        });

        // Global Event Listener for Clear Icon
        document.addEventListener('click', (e) => {
            const clearBtn = e.target.closest('.input__clear-icon');
            if (clearBtn) {
                // Find reference to input within the same container
                const container = clearBtn.closest('.input__container');
                if (container) {
                    const input = container.querySelector('.input__input');
                    if (input) {
                        input.value = '';
                        input.focus();
                        toggleHasContent(input); // Update class
                    }
                }
            }
        });

        // Initialize has-content class on load
        document.addEventListener('DOMContentLoaded', () => {
            document.querySelectorAll('.input__input').forEach(toggleHasContent);
            initPlayground(); // Call original init
        });

        // Playground Logic
        function initPlayground() {
            const container = document.getElementById('playground-input-container');
            // const input = document.getElementById('pg-input'); // Re-queried in updateUI
            const helperEl = document.getElementById('pg-helper');

            const sizeToggles = document.getElementById('size-toggles');
            const stateDisabled = document.getElementById('state-disabled');
            const stateError = document.getElementById('state-error');
            const stateSuccess = document.getElementById('state-success');
            const optIcon = document.getElementById('opt-icon');
            const optClear = document.getElementById('opt-clear');

            const inputPlaceholder = document.getElementById('input-placeholder');
            const inputHelper = document.getElementById('input-helper');

            const generatedCode = document.getElementById('generated-code');
            const copyBtn = document.getElementById('copy-code-btn');

            let state = {
                size: 'input--large',
                disabled: false,
                error: false,
                success: false,
                icon: false,
                clear: true,
                placeholder: 'Placeholder Text',
                helper: 'Helper text goes here'
            };

            function updateUI() {
                // Determine content presence
                const hasContent = state.placeholder.length > 0 || (document.getElementById('pg-input') && document.getElementById('pg-input').value.length > 0);
                // Note: Playground input value might not be captured in state directly, but we can check the element or just rely on global listener. 
                // However, for the initial render or class string construction:

                // Classes
                let classes = `input ${state.size}`;
                if (state.error) classes += ' input--error';
                if (state.success) classes += ' input--success';
                if (state.disabled) classes += ' input--disabled';
                // We let the global listener handle has-content for the preview element to avoid state sync issues, 
                // BUT we need it for the code snippet.
                const inputVal = document.getElementById('pg-input') ? document.getElementById('pg-input').value : '';
                const showHasContent = inputVal.length > 0;
                if (showHasContent) classes += ' has-content';

                container.className = classes;

                // HTML Structure Construction
                let innerHTML = '';
                innerHTML += `<div class="input__container">`;

                if (state.icon) {
                    innerHTML += `<div class="input__icon" data-icon="ic_search"></div>`;
                }

                innerHTML += `<input type="text" class="input__input" placeholder="${state.placeholder}" id="pg-input" ${state.disabled ? 'disabled' : ''}>`;

                if (state.clear) {
                    innerHTML += `<div class="input__clear-icon"></div>`;
                }

                innerHTML += `</div>`;
                innerHTML += `<p class="input__helper-text" id="pg-helper">${state.helper}</p>`;

                container.innerHTML = innerHTML;
                if (window.initializeDataIcons) initializeDataIcons(container);

                // Re-bind input event if needed, or rely on bubble? 
                // We need to re-bind if we want to track value for something? 
                // No, just visual test.

                // Code Generation
                let code = `<div class="input ${state.size}${state.error ? ' input--error' : ''}${state.success ? ' input--success' : ''}${state.disabled ? ' input--disabled' : ''}${showHasContent ? ' has-content' : ''}">\n`;
                code += `    <div class="input__container">\n`;
                if (state.icon) {
                    code += `        <div class="input__icon">\n`;
                    code += `            <!-- Icon SVG -->\n`;
                    code += `        </div>\n`;
                }
                code += `        <input type="text" class="input__input" placeholder="${state.placeholder}"${state.disabled ? ' disabled' : ''}>\n`;
                if (state.clear) {
                    code += `        <div class="input__clear-icon"></div>\n`;
                }
                code += `    </div>\n`;
                code += `    <p class="input__helper-text">${state.helper}</p>\n`;
                code += `</div>`;

                generatedCode.innerText = code;
            }

            sizeToggles.addEventListener('click', (e) => {
                if (e.target.classList.contains('toggle-btn')) {
                    sizeToggles.querySelectorAll('.toggle-btn').forEach(b => b.classList.remove('active'));
                    e.target.classList.add('active');
                    state.size = e.target.dataset.value;
                    updateUI();
                }
            });

            stateDisabled.addEventListener('change', (e) => {
                state.disabled = e.target.checked;
                updateUI();
            });

            stateError.addEventListener('change', (e) => {
                state.error = e.target.checked;
                if (state.error) {
                    state.success = false;
                    stateSuccess.checked = false;
                }
                updateUI();
            });

            stateSuccess.addEventListener('change', (e) => {
                state.success = e.target.checked;
                if (state.success) {
                    state.error = false;
                    stateError.checked = false;
                }
                updateUI();
            });

            optIcon.addEventListener('change', (e) => {
                state.icon = e.target.checked;
                updateUI();
            });

            optClear.addEventListener('change', (e) => {
                state.clear = e.target.checked;
                updateUI();
            });

            inputPlaceholder.addEventListener('input', (e) => {
                state.placeholder = e.target.value;
                updateUI();
            });

            inputHelper.addEventListener('input', (e) => {
                state.helper = e.target.value;
                updateUI();
            });

            copyBtn.addEventListener('click', () => {
                navigator.clipboard.writeText(generatedCode.innerText).then(() => {
                    const originalHTML = copyBtn.innerHTML;
                    copyBtn.innerHTML = `<div data-icon="ic_check"></div>`;
                    if (window.initializeDataIcons) initializeDataIcons(copyBtn);
                    setTimeout(() => {
                        copyBtn.innerHTML = originalHTML;
                        if (window.initializeDataIcons) initializeDataIcons(copyBtn);
                    }, 1500);
                });
            });

            updateUI();
        }

        document.addEventListener('DOMContentLoaded', () => {
            initPlayground();
            initializeDataIcons();
        });
    </script>
</body>

</html>