<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VDS 3.0 Component Gallery - Textarea</title>
    <link rel="stylesheet" as="style" crossorigin
        href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css" />
    <link rel="stylesheet" href="showroom.css">
    <script src="assets/js/theme.js"></script>
    <script src="assets/js/icons.js"></script>
</head>

<body>
    <header class="showroom-header">
        <div class="header-left">
            <span class="logo">VDS 3.0 Gallery</span>
        </div>
        <div class="header-right">
            <button id="theme-toggle" class="btn-theme-toggle" title="ÌÖåÎßà Ï†ÑÌôò">üåì</button>
        </div>
    </header>

    <div class="app-container">
        <aside class="sidebar">
            <nav class="sidebar-nav">
                <div class="sidebar-title">Components</div>
                <ul class="sidebar-menu">
                    <li><a href="buttons.html" class="sidebar-link">Buttons</a></li>
                    <li><a href="icon-buttons.html" class="sidebar-link">Icon Buttons</a></li>
                    <li><a href="input-fields.html" class="sidebar-link">Input Fields</a></li>
                    <li><a href="textarea.html" class="sidebar-link active">Textarea</a></li>
                    <li><a href="dropdowns.html" class="sidebar-link">Dropdowns</a></li>
                    <li><a href="menus.html" class="sidebar-link">Menus</a></li>
                    <li><a href="tabs.html" class="sidebar-link">Tabs</a></li>
                    <li><a href="segmented-controls.html" class="sidebar-link">SegmentedControl</a></li>
                    <li><a href="chips.html" class="sidebar-link">Chips</a></li>
                    <li><a href="toasts.html" class="sidebar-link">Toasts</a></li>
                    <li><a href="tooltips.html" class="sidebar-link">Tooltips</a></li>
                    <li><a href="switches.html" class="sidebar-link">Switches</a></li>
                    <li><a href="radios.html" class="sidebar-link">Radios</a></li>
                </ul>
            </nav>
        </aside>

        <main class="showroom-main">
            <section class="component-section playground-section">
                <h2 class="section-title">Interactive Playground</h2>
                <p class="section-desc">Textarea Ïª¥Ìè¨ÎÑåÌä∏Ïùò Îã§ÏñëÌïú ÏÉÅÌÉúÏôÄ ÏòµÏÖòÏùÑ ÌÖåÏä§Ìä∏Ìï¥Î≥¥ÏÑ∏Ïöî.</p>

                <div class="playground-container">
                    <div class="preview-area">
                        <div class="preview-canvas">
                            <div id="playground-textarea-container" class="textarea"
                                style="max-width: 400px; width: 100%;">
                                <div class="textarea__container">
                                    <textarea class="textarea__input" placeholder="Placeholder Text" id="pg-input"
                                        maxlength="500" aria-describedby="pg-helper pg-counter"></textarea>
                                    <span class="textarea__counter" id="pg-counter" aria-hidden="true">0/500</span>
                                </div>
                                <div class="textarea__bottom">
                                    <p class="textarea__helper-text" id="pg-helper">Helper text goes here</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="controls-area">
                        <div class="control-group">
                            <label class="control-label">Status</label>
                            <div class="checkbox-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="state-disabled"> Disabled
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" id="state-error"> Error
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" id="state-success"> Success
                                </label>
                            </div>
                        </div>

                        <div class="control-group">
                            <label class="control-label">Options</label>
                            <div class="checkbox-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="opt-helper" checked> Show Helper Text
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" id="opt-counter" checked> Show Character Counter
                                </label>
                            </div>
                        </div>

                        <div class="control-group">
                            <label class="control-label">Content</label>
                            <div style="display: flex; flex-direction: column; gap: 8px;">
                                <input type="text" id="input-placeholder" class="control-select"
                                    placeholder="Placeholder Text" value="Placeholder Text" style="padding: 8px;">
                                <input type="text" id="input-helper" class="control-select" placeholder="Helper Text"
                                    value="Helper text goes here" style="padding: 8px;">
                            </div>
                        </div>
                    </div>
                </div>

                <div class="code-viewer">
                    <pre><code id="generated-code"></code></pre>
                    <button class="copy-btn" id="copy-code-btn" title="Copy Code">
                        <div data-icon="ic_copy"></div>
                    </button>
                </div>
            </section>

            <section class="component-section" id="all-variants">
                <h2 class="section-title">Textarea Variants</h2>
                <p class="section-desc">Medium ÏÇ¨Ïù¥Ï¶à TextareaÏùò Îã§ÏñëÌïú ÏÉÅÌÉúÏûÖÎãàÎã§.</p>

                <div class="gallery-grid"
                    style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 40px; align-items: start;">

                    <!-- Default -->
                    <div class="gallery-item">
                        <div class="item-label">Default</div>
                        <div class="textarea">
                            <div class="textarea__container">
                                <textarea class="textarea__input" placeholder="Placeholder"></textarea>
                            </div>
                            <div class="textarea__bottom">
                                <p class="textarea__helper-text">Helper text</p>
                            </div>
                        </div>
                    </div>

                    <!-- With Content -->
                    <div class="gallery-item">
                        <div class="item-label">With Content & Counter</div>
                        <div class="textarea">
                            <div class="textarea__container">
                                <textarea class="textarea__input">This is some input text content.</textarea>
                                <span class="textarea__counter">28/500</span>
                            </div>
                            <div class="textarea__bottom">
                                <p class="textarea__helper-text">Enter description</p>
                            </div>
                        </div>
                    </div>

                    <!-- Error -->
                    <div class="gallery-item">
                        <div class="item-label">Error</div>
                        <div class="textarea textarea--error">
                            <div class="textarea__container">
                                <textarea class="textarea__input">Invalid content</textarea>
                                <span class="textarea__counter">15/500</span>
                            </div>
                            <div class="textarea__bottom">
                                <p class="textarea__helper-text">Error message</p>
                            </div>
                        </div>
                    </div>

                    <!-- Disabled -->
                    <div class="gallery-item">
                        <div class="item-label">Disabled</div>
                        <div class="textarea textarea--disabled">
                            <div class="textarea__container">
                                <textarea class="textarea__input" disabled>Disabled content</textarea>
                            </div>
                            <div class="textarea__bottom">
                                <p class="textarea__helper-text">Helper text</p>
                            </div>
                        </div>
                    </div>



                </div>
            </section>
        </main>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            initPlayground();
            initThemeToggle();
            initializeDataIcons();
        });

        function initThemeToggle() {
            // Theme handling handled by theme.js, just need to bind if custom logic needed
            // theme.js handles #theme-toggle click automatically if ID matches
        }

        function initPlayground() {
            const container = document.getElementById('playground-textarea-container');
            const inputEl = document.getElementById('pg-input');
            const helperEl = document.getElementById('pg-helper');
            const counterEl = document.getElementById('pg-counter');

            const stateDisabled = document.getElementById('state-disabled');
            const stateError = document.getElementById('state-error');
            const stateSuccess = document.getElementById('state-success');

            const optHelper = document.getElementById('opt-helper');
            const optCounter = document.getElementById('opt-counter');

            const inputPlaceholder = document.getElementById('input-placeholder');
            const inputHelper = document.getElementById('input-helper');

            const generatedCode = document.getElementById('generated-code');
            const copyBtn = document.getElementById('copy-code-btn');

            let state = {
                disabled: false,
                error: false,
                success: false,
                showHelper: true,
                showCounter: true,
                placeholder: 'Placeholder Text',
                helperText: 'Helper text goes here',
                value: ''
            };

            // Character Counter Logic
            inputEl.addEventListener('input', (e) => {
                state.value = e.target.value;
                updateCounter();
            });

            function updateCounter() {
                if (state.showCounter) {
                    counterEl.innerText = `${state.value.length}/500`;
                }
            }

            function updateUI() {
                // Classes
                let classes = 'textarea';
                if (state.error) classes += ' textarea--error';
                if (state.success) classes += ' textarea--success';
                if (state.disabled) classes += ' textarea--disabled';

                container.className = classes;

                // Elements Visibility & Content
                inputEl.placeholder = state.placeholder;
                inputEl.disabled = state.disabled;

                // Accessibility
                inputEl.setAttribute('aria-invalid', state.error);
                inputEl.setAttribute('aria-disabled', state.disabled);

                // Don't overwrite value if user is typing, unless programmatic reset?
                // inputEl.value = state.value; 

                const bottomEl = container.querySelector('.textarea__bottom');
                if (!state.showHelper && !state.showCounter) {
                    bottomEl.style.display = 'none';
                } else {
                    bottomEl.style.display = 'flex';
                    helperEl.style.display = state.showHelper ? 'block' : 'none';
                    helperEl.innerText = state.helperText;

                    counterEl.style.display = state.showCounter ? 'block' : 'none';
                    updateCounter();
                }

                // Code Generation
                let code = `<div class="${classes}">\n`;
                code += `    <div class="textarea__container">\n`;
                code += `        <textarea class="textarea__input" placeholder="${state.placeholder}" maxlength="500"${state.disabled ? ' disabled aria-disabled="true"' : ''}${state.error ? ' aria-invalid="true"' : ''}></textarea>\n`;
                if (state.showCounter) {
                    code += `        <span class="textarea__counter">0/500</span>\n`;
                }
                code += `    </div>\n`;

                if (state.showHelper) {
                    code += `    <div class="textarea__bottom">\n`;
                    code += `        <p class="textarea__helper-text">${state.helperText}</p>\n`;
                    code += `    </div>\n`;
                }
                code += `</div>`;

                generatedCode.innerText = code;
            }

            // Event Listeners
            stateDisabled.addEventListener('change', (e) => {
                state.disabled = e.target.checked;
                updateUI();
            });

            stateError.addEventListener('change', (e) => {
                state.error = e.target.checked;
                if (state.error) {
                    state.success = false;
                    stateSuccess.checked = false;
                }
                updateUI();
            });

            stateSuccess.addEventListener('change', (e) => {
                state.success = e.target.checked;
                if (state.success) {
                    state.error = false;
                    stateError.checked = false;
                }
                updateUI();
            });

            optHelper.addEventListener('change', (e) => {
                state.showHelper = e.target.checked;
                updateUI();
            });

            optCounter.addEventListener('change', (e) => {
                state.showCounter = e.target.checked;
                updateUI();
            });

            inputPlaceholder.addEventListener('input', (e) => {
                state.placeholder = e.target.value;
                updateUI();
            });

            inputHelper.addEventListener('input', (e) => {
                state.helperText = e.target.value;
                updateUI();
            });

            copyBtn.addEventListener('click', () => {
                navigator.clipboard.writeText(generatedCode.innerText).then(() => {
                    const originalHTML = copyBtn.innerHTML;
                    copyBtn.innerHTML = `<div data-icon="ic_check"></div>`;
                    initializeDataIcons();
                    setTimeout(() => {
                        copyBtn.innerHTML = originalHTML;
                        initializeDataIcons();
                    }, 1500);
                });
            });

            updateUI();
        }
    </script>
</body>

</html>