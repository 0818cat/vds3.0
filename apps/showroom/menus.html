<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VDS 3.0 Component Gallery - Menus</title>
    <link rel="stylesheet" as="style" crossorigin
        href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css" />
    <link rel="stylesheet" href="showroom.css">
    <script src="assets/js/icons.js"></script>
    <style>
        /* Custom styles for menu preview */
        .menu-preview {
            position: relative;
            height: 300px;
            width: 100%;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            padding-top: 20px;
            background-color: transparent;
            /* Border removed as requested */
        }

        /* Force menu display for preview */
        .menu.preview-mode {
            position: relative;
            top: auto;
            left: auto;
            display: block;
            opacity: 1;
            transform: none;
            width: 240px;
            z-index: 1;
            /* Ensure it stays below fixed header (z-index 100) */
        }

        /* Wrapper utility for nested menu parent */
        .menu__item.has-sub {
            overflow: visible;
        }
    </style>
</head>

<body>
    <header class="showroom-header">
        <div class="header-left">
            <span class="logo">VDS 3.0 Gallery</span>
        </div>
        <div class="header-right">
            <button id="theme-toggle" class="btn-theme-toggle" title="ÌÖåÎßà Ï†ÑÌôò">üåì</button>
        </div>
    </header>

    <div class="app-container">
        <aside class="sidebar">
            <nav class="sidebar-nav">
                <div class="sidebar-title">Components</div>
                <ul class="sidebar-menu">
                    <li><a href="buttons.html" class="sidebar-link">Buttons</a></li>
                    <li><a href="icon-buttons.html" class="sidebar-link">Icon Buttons</a></li>
                    <li><a href="input-fields.html" class="sidebar-link">Input Fields</a></li>
                    <li><a href="textarea.html" class="sidebar-link">Textarea</a></li>
                    <li><a href="dropdowns.html" class="sidebar-link">Dropdowns</a></li>
                    <li><a href="menus.html" class="sidebar-link active">Menus</a></li>
                    <li><a href="tabs.html" class="sidebar-link">Tabs</a></li>
                    <li><a href="segmented-controls.html" class="sidebar-link">SegmentedControl</a></li>
                    <li><a href="chips.html" class="sidebar-link">Chips</a></li>
                    <li><a href="toasts.html" class="sidebar-link">Toasts</a></li>
                    <li><a href="tooltips.html" class="sidebar-link">Tooltips</a></li>
                    <li><a href="switches.html" class="sidebar-link">Switches</a></li>
                    <li><a href="radios.html" class="sidebar-link">Radios</a></li>
                </ul>
            </nav>
        </aside>

        <main class="showroom-main">
            <section class="component-section playground-section">
                <h2 class="section-title">Interactive Playground</h2>
                <p class="section-desc">Î©îÎâ¥ Íµ¨ÏÑ±ÏöîÏÜå(ÌÉÄÏù¥ÌãÄ, ÏïÑÏù¥ÏΩò, Íµ¨Î∂ÑÏÑ† Îì±)Î•º Ï°∞Ìï©ÌïòÏó¨ ÌÖåÏä§Ìä∏Ìï¥Î≥¥ÏÑ∏Ïöî.</p>

                <div class="playground-container">
                    <div class="preview-area">
                        <div class="preview-canvas">
                            <div id="playground-menu-container" class="menu-preview">
                                <!-- Menu Preview will be rendered here -->
                            </div>
                        </div>
                    </div>
                    <div class="controls-area">
                        <div class="control-group">
                            <label class="control-label">Content</label>
                            <div class="checkbox-group"
                                style="display: flex; gap: 12px; align-items: flex-start; flex-direction: column;">
                                <label class="checkbox-label" style="display: flex; align-items: center;">
                                    <span
                                        style="font-size: 13px; color: var(--label-secondary); width: 60px;">Count:</span>
                                    <input type="number" id="opt-count" value="2" min="1" max="10"
                                        style="width: 50px; padding: 4px 8px; border: 1px solid var(--line-secondary); border-radius: 6px;">
                                </label>
                                <div id="dynamic-labels-container"
                                    style="display: flex; flex-direction: column; gap: 8px; width: 100%;">
                                    <!-- Dynamic Inputs will be injected here -->
                                </div>
                            </div>
                        </div>

                        <div class="control-group">
                            <label class="control-label">Items</label>
                            <div class="checkbox-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="opt-group-title" checked> Group Title
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" id="opt-icons" checked> Icons
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" id="opt-divider" checked> Divider
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" id="opt-negative" checked> Negative Action
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" id="opt-chevron"> Chevron (2-depth)
                                </label>
                            </div>
                        </div>

                        <div class="control-group">
                            <label class="control-label">Size</label>
                            <div class="toggle-group" id="size-toggles">
                                <button class="toggle-btn active" data-value="">Default</button>
                                <button class="toggle-btn" data-value="menu--small">Small</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="code-viewer">
                    <pre><code id="generated-code"></code></pre>
                    <button class="copy-btn" id="copy-code-btn" title="Copy Code">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                            <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                        </svg>
                    </button>
                </div>
            </section>

            <section class="component-section" id="all-variants">
                <h2 class="section-title">Menu Variants</h2>
                <p class="section-desc">Îã§ÏñëÌïú Î©îÎâ¥ Íµ¨ÏÑ± ÏòàÏãúÏûÖÎãàÎã§.</p>

                <div class="gallery-grid"
                    style="display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 40px; align-items: start;">

                    <!-- Simple Menu -->
                    <div class="variant-item">
                        <h3 class="variant-title">Simple Menu</h3>
                        <div class="menu preview-mode">
                            <div class="menu__item">
                                <span class="menu__text">Profile</span>
                                <div class="menu__selected-check"></div>
                            </div>
                            <div class="menu__item">
                                <span class="menu__text">Settings</span>
                                <div class="menu__selected-check"></div>
                            </div>
                            <div class="menu__item">
                                <span class="menu__text">Logout</span>
                                <div class="menu__selected-check"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Complex Menu -->
                    <div class="variant-item">
                        <h3 class="variant-title">Complex Menu</h3>
                        <div class="menu preview-mode">
                            <div class="menu__group-title">Actions</div>
                            <div class="menu__item">
                                <div class="menu__icon" data-icon="ic_pencil"></div>
                                <span class="menu__text">Edit</span>
                            </div>
                            <div class="menu__item">
                                <div class="menu__icon" data-icon="ic_copy"></div>
                                <span class="menu__text">Duplicate</span>
                                <div class="menu__selected-check"></div>
                            </div>
                            <div class="menu__divider"></div>
                            <div class="menu__group-title">DangerZone</div>
                            <div class="menu__item menu__item--negative">
                                <div class="menu__icon" data-icon="ic_trash_line"></div>
                                <span class="menu__text">Delete</span>
                                <div class="menu__selected-check"></div>
                            </div>
                        </div>
                    </div>

                    <div class="variant-item">
                        <h3 class="variant-title">Small Menu</h3>
                        <div class="menu menu--small preview-mode">
                            <div class="menu__group-title">FILE</div>
                            <div class="menu__item menu__item--selected">
                                <span class="menu__text">New File</span>
                                <span class="menu__caption">Cmd+N</span>
                                <div class="menu__selected-check"></div>
                            </div>
                            <div class="menu__item">
                                <span class="menu__text">Open File...</span>
                                <div class="menu__selected-check"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Nested Menu -->
                    <div class="variant-item">
                        <h3 class="variant-title">Nested Menu</h3>
                        <div class="menu preview-mode">
                            <div class="menu__item">
                                <span class="menu__text">Display</span>
                                <div class="menu__chevron" data-icon="ic_chevron_right_large"></div>
                            </div>
                            <div class="menu__item">
                                <span class="menu__text">Theme</span>
                                <div class="menu__chevron" data-icon="ic_chevron_right_large"></div>
                            </div>
                            <div class="menu__item">
                                <span class="menu__text">Zoom</span>
                            </div>
                        </div>
                    </div>

                    <!-- Nested Menu (Active) -->
                    <div class="variant-item">
                        <h3 class="variant-title">Nested Menu (Active)</h3>
                        <div class="menu preview-mode">
                            <!-- Parent Item with Active State & Overflow Visible -->
                            <div class="menu__item has-sub" style="background-color: var(--fill-surface-secondary);">
                                <span class="menu__text">Display</span>
                                <div class="menu__chevron" data-icon="ic_chevron_right_large"></div>
                                <!-- Sub Menu -->
                                <div class="menu menu--sub" style="display: block; opacity: 1;">
                                    <div class="menu__item">
                                        <span class="menu__text">Light</span>
                                    </div>
                                    <div class="menu__item">
                                        <span class="menu__text">Dark</span>
                                    </div>
                                    <div class="menu__item">
                                        <span class="menu__text">System</span>
                                    </div>
                                </div>
                            </div>
                            <div class="menu__item">
                                <span class="menu__text">Theme</span>
                                <div class="menu__chevron" data-icon="ic_chevron_right_large"></div>
                            </div>
                            <div class="menu__item">
                                <span class="menu__text">Zoom</span>
                            </div>
                        </div>
                    </div>

                </div>
            </section>
        </main>
    </div>

    <script src="assets/js/theme.js"></script>
    <script>
        const availableIcons = {
            'Edit': 'ic_pencil',
            'Copy': 'ic_copy',
            'Bookmark': 'ic_bookmark_line',
            'Delete': 'ic_trash_line',
            'Settings': 'ic_setting',
            'Folder': 'ic_folder_line',
            'Image': 'ic_image_line',
            'Logout': 'ic_logout_line',
            'Check': 'ic_check',
            'Security': 'ic_security_line'
        };


        // Playground Logic for Menu
        function initPlayground() {
            const container = document.getElementById('playground-menu-container');
            const generatedCode = document.getElementById('generated-code');
            const copyBtn = document.getElementById('copy-code-btn');

            const optGroupTitle = document.getElementById('opt-group-title');
            const optIcons = document.getElementById('opt-icons');
            const optDivider = document.getElementById('opt-divider');
            const optNegative = document.getElementById('opt-negative');
            const optChevron = document.getElementById('opt-chevron');
            const optCount = document.getElementById('opt-count');
            const dynamicLabelsContainer = document.getElementById('dynamic-labels-container');
            const sizeToggles = document.getElementById('size-toggles');

            let state = {
                groupTitle: true,
                icons: true,
                divider: true,
                negative: true,
                chevron: false,
                count: 2,
                items: [
                    { label: 'Edit', icon: 'ic_pencil' },
                    { label: 'Bookmark', icon: 'ic_bookmark_line' }
                ],
                size: ''
            };

            function renderItemControls() {
                dynamicLabelsContainer.innerHTML = '';
                for (let i = 0; i < state.count; i++) {
                    const row = document.createElement('div');
                    row.style.display = 'flex';
                    row.style.gap = '8px';
                    row.style.width = '100%';

                    // Label Input
                    const labelInput = document.createElement('input');
                    labelInput.type = 'text';
                    labelInput.value = state.items[i]?.label || `Menu Item ${i + 1}`;
                    labelInput.placeholder = `Item ${i + 1}`;
                    labelInput.style.flex = '1';
                    labelInput.style.padding = '4px 8px';
                    labelInput.style.border = '1px solid var(--line-secondary)';
                    labelInput.style.borderRadius = '6px';
                    labelInput.addEventListener('input', (e) => {
                        state.items[i].label = e.target.value;
                        updateUI();
                    });

                    // Icon Select
                    const iconSelect = document.createElement('select');
                    iconSelect.style.width = '100px';
                    iconSelect.style.padding = '4px';
                    iconSelect.style.border = '1px solid var(--line-secondary)';
                    iconSelect.style.borderRadius = '6px';
                    iconSelect.style.fontSize = '12px';

                    Object.values(availableIcons).forEach(iconName => {
                        const option = document.createElement('option');
                        option.value = iconName;
                        option.textContent = iconName.replace('ic_', '');
                        if (state.items[i]?.icon === iconName) option.selected = true;
                        iconSelect.appendChild(option);
                    });

                    iconSelect.addEventListener('change', (e) => {
                        state.items[i].icon = e.target.value;
                        updateUI();
                    });

                    row.appendChild(labelInput);
                    row.appendChild(iconSelect);
                    dynamicLabelsContainer.appendChild(row);
                }
            }

            function updateUI() {
                let classes = `menu preview-mode ${state.size}`;

                let innerHTML = `<div class="${classes}">`;

                if (state.groupTitle) {
                    innerHTML += `<div class="menu__group-title">ACTIONS</div>`;
                }

                // Dynamic Item Generation
                for (let i = 0; i < state.count; i++) {
                    const isFirst = i === 0;
                    const hasSub = isFirst && state.chevron;
                    const currentItem = state.items[i] || { label: `Item ${i + 1}`, icon: 'ic_pencil' };

                    let itemClass = hasSub ? 'menu__item has-sub' : 'menu__item';
                    innerHTML += `<div class="${itemClass}">`;

                    if (state.icons) {
                        const iconPlaceholderId = `icon-placeholder-${i}`;
                        innerHTML += `<div class="menu__icon" data-icon="${currentItem.icon}">...</div>`;
                    }

                    innerHTML += `<span class="menu__text">${currentItem.label}</span>`;
                    innerHTML += `<div class="menu__selected-check"></div>`;

                    if (hasSub) {
                        innerHTML += `<div class="menu__chevron" data-icon="ic_chevron_right_large"></div>`;

                        innerHTML += `
                            <div class="menu menu--sub">
                                <div class="menu__item"><span class="menu__text">Undo</span></div>
                                <div class="menu__item"><span class="menu__text">Redo</span></div>
                            </div>
                        `;
                    }
                    innerHTML += `</div>`;
                }

                if (state.divider && state.negative) {
                    innerHTML += `<div class="menu__divider"></div>`;
                }

                if (state.negative) {
                    if (state.groupTitle) {
                        innerHTML += `<div class="menu__group-title">DANGER ZONE</div>`;
                    }
                    innerHTML += `<div class="menu__item menu__item--negative">`;
                    if (state.icons) {
                        innerHTML += `<div class="menu__icon" data-icon="ic_trash_line">...</div>`;
                    }
                    innerHTML += `<span class="menu__text">Delete</span>`;
                    innerHTML += `</div>`;
                }
                innerHTML += `</div>`;

                container.innerHTML = innerHTML;
                if (window.initializeDataIcons) initializeDataIcons(container);

                // Code Generation
                let codeClasses = `menu ${state.size}`;
                let code = `<div class="${codeClasses.trim()}">\n`;
                if (state.groupTitle) code += `    <div class="menu__group-title">ACTIONS</div>\n`;

                // Dynamic Items
                for (let i = 0; i < state.count; i++) {
                    const isFirst = i === 0;
                    const hasSub = isFirst && state.chevron;
                    const currentItem = state.items[i] || { label: `Item ${i + 1}`, icon: 'ic_pencil' };
                    let itemCodeClass = hasSub ? ' class="menu__item has-sub"' : ' class="menu__item"';

                    code += `    <div${itemCodeClass}>\n`;
                    if (state.icons) code += `        <div class="menu__icon"><!-- Icon: ${currentItem.icon} --></div>\n`;
                    code += `        <span class="menu__text">${currentItem.label}</span>\n`;
                    if (hasSub) {
                        code += `        <div class="menu__chevron" data-icon="ic_chevron_right_large"></div>\n`;
                        code += `        <div class="menu menu--sub">\n`;
                        code += `            <div class="menu__item"><span class="menu__text">Undo</span></div>\n`;
                        code += `            <div class="menu__item"><span class="menu__text">Redo</span></div>\n`;
                        code += `        </div>\n`;
                    }
                    code += `    </div>\n`;
                }

                if (state.divider && state.negative) code += `    <div class="menu__divider"></div>\n`;

                if (state.negative) {
                    if (state.groupTitle) code += `    <div class="menu__group-title">DANGER ZONE</div>\n`;
                    code += `    <div class="menu__item menu__item--negative">\n`;
                    if (state.icons) code += `        <div class="menu__icon"><!-- Icon: ic_trash_line --></div>\n`;
                    code += `        <span class="menu__text">Delete</span>\n    </div>\n`;
                }
                code += `</div>`;

                generatedCode.innerText = code;
            }

            // Event Listeners (Updated)
            optCount.addEventListener('input', (e) => {
                let val = parseInt(e.target.value);
                if (val < 1) val = 1;
                if (val > 10) val = 10;

                // Resize items array
                if (val > state.count) {
                    for (let i = state.count; i < val; i++) {
                        state.items[i] = {
                            label: `Menu Item ${i + 1}`,
                            icon: Object.keys(availableIcons)[i % Object.keys(availableIcons).length]
                        };
                    }
                } else if (val < state.count) {
                    state.items = state.items.slice(0, val);
                }

                state.count = val;
                renderItemControls();
                updateUI();
            });

            // Initial UI Update
            renderItemControls();

            [optGroupTitle, optIcons, optDivider, optNegative, optChevron].forEach(el => {
                el.addEventListener('change', (e) => {
                    const id = e.target.id;
                    if (id === 'opt-group-title') state.groupTitle = e.target.checked;
                    if (id === 'opt-icons') state.icons = e.target.checked;
                    if (id === 'opt-divider') state.divider = e.target.checked;
                    if (id === 'opt-negative') state.negative = e.target.checked;
                    if (id === 'opt-chevron') state.chevron = e.target.checked;
                    updateUI();
                });
            });

            sizeToggles.addEventListener('click', (e) => {
                if (e.target.classList.contains('toggle-btn')) {
                    sizeToggles.querySelectorAll('.toggle-btn').forEach(b => b.classList.remove('active'));
                    e.target.classList.add('active');
                    state.size = e.target.dataset.value;
                    updateUI();
                }
            });

            copyBtn.addEventListener('click', () => {
                navigator.clipboard.writeText(generatedCode.innerText).then(() => {
                    const originalHTML = copyBtn.innerHTML;
                    copyBtn.innerHTML = `<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>`;
                    setTimeout(() => copyBtn.innerHTML = originalHTML, 1500);
                });
            });

            updateUI();
            initializeDataIcons();
        }

        document.addEventListener('DOMContentLoaded', () => {
            initPlayground();
            initializeDataIcons();
        });
    </script>
</body>

</html>