@import "../core/vds3.0";



// --- 기본 버튼 스타일 ---
// Placeholder Selector를 사용하여 중복 코드를 방지하고 명시적으로 상속합니다.
// Mixin을 사용하여 중복 코드를 방지하고 명시적으로 포함합니다.
@mixin btn-base {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    // 성능 최적화: 필요한 속성만 transition 적용
    transition:
        background-color 0.2s cubic-bezier(0.4, 0, 0.2, 1),
        color 0.2s cubic-bezier(0.4, 0, 0.2, 1),
        box-shadow 0.2s cubic-bezier(0.4, 0, 0.2, 1),
        border-color 0.2s cubic-bezier(0.4, 0, 0.2, 1),
        opacity 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    border: none; // 기본 테두리 초기화
    outline: none;
    box-sizing: border-box;
    white-space: nowrap;
    user-select: none;
    font-family: var(--font-family-base); // 토큰화 적용

    // 인터랙션 오버레이 (기본: Light)
    position: relative;
    overflow: hidden;
    @include interaction-overlay(var(--interaction-surface), 'light');
}

// --- 비활성화 스타일 Mixin ---
@mixin btn-disabled($bg: transparent, $border: none) {
    cursor: not-allowed;
    pointer-events: none;
    opacity: 1;
    background-color: $bg !important;
    color: var(--label-quinary) !important;
    border: $border !important;
    box-shadow: none !important;

    &::before,
    &::after {
        display: none !important;
    }
}





.btn {
    @include btn-base;

    // --- 크기 ---
    &--large {
        height: 48px;
        padding: 0 18px;
        border-radius: $radius-medium;
        gap: 6px;
        min-width: 84px;
        @include label-15-sb();

        .btn__leading-icon,
        .btn__trailing-icon {
            width: 18px;
            height: 18px;
        }
    }

    &--medium {
        height: 40px;
        padding: 0 14px;
        border-radius: $radius-medium;
        gap: 6px;
        min-width: 70px;
        @include label-14-sb();

        .btn__leading-icon,
        .btn__trailing-icon {
            width: 17px;
            height: 17px;
        }
    }

    &--small {
        height: 32px;
        padding: 0 10px;
        border-radius: $radius-small;
        gap: 4px;
        min-width: 56px;
        @include label-13-sb();

        .btn__leading-icon,
        .btn__trailing-icon {
            width: 16px;
            height: 16px;
        }
    }



    // --- 타입 & 색상 ---

    // 1. 채움 (Filled - 기본)
    &--primary {
        @include interaction-overlay(var(--interaction-surface), 'normal'); // Filled 인터랙션 인라인 적용
        background-color: var(--refine-accent);
        color: var(--static-white);
        @include elevation-20();
    }

    &--secondary {
        background-color: var(--refine-senary);
        color: var(--label-primary);
    }

    &--tertiary {
        @include interaction-overlay(var(--interaction-surface), 'normal'); // Filled 인터랙션 인라인 적용
        background-color: var(--refine-primary);
        color: var(--static-white);
    }

    &--negative {
        @include interaction-overlay(var(--interaction-surface), 'normal'); // Filled 인터랙션 인라인 적용
        background-color: var(--status-negative);
        color: var(--static-white);
    }









    // 2. 토널 (Tonal - 밝은 배경)
    &--tonal {
        &.btn--primary {
            background-color: var(--colors-blue-25);
            color: var(--static-primary);
            box-shadow: none; // 그림자(elevation) 초기화
            @include interaction-overlay(var(--static-primary), 'light'); // Primary 인터랙션 인라인 적용
        }



        &.btn--negative {
            background-color: var(--colors-red-25);
            color: var(--status-negative);
            @include interaction-overlay(var(--status-negative), 'light'); // Negative 인터랙션 인라인 적용
        }
    }






    // 3. 아웃라인 (Outlined - 테두리)
    &--outlined {
        background-color: transparent;
        border: 1px solid currentColor;
        box-shadow: none;

        &.btn--primary {
            color: var(--static-primary);
            border-color: var(--static-primary);
            @include interaction-overlay(var(--static-primary), 'light'); // Primary 인터랙션 인라인 적용
        }

        &.btn--secondary {
            color: var(--label-primary);
            border-color: var(--line-secondary);
        }

        &.btn--negative {
            color: var(--status-negative);
            border-color: var(--status-negative);
            @include interaction-overlay(var(--status-negative), 'light'); // Negative 인터랙션 인라인 적용
        }
    }










    // 4. 고스트 (Ghost - 투명)
    &--ghost {
        background-color: transparent;
        border: none;
        box-shadow: none;

        &.btn--primary {
            color: var(--static-primary);
            @include interaction-overlay(var(--static-primary), 'light'); // Primary 인터랙션 인라인 적용
        }

        &.btn--secondary {
            color: var(--label-primary);
        }

        &.btn--negative {
            color: var(--status-negative);
            @include interaction-overlay(var(--status-negative), 'light'); // Negative 인터랙션 인라인 적용
        }
    }








    // --- 상태 ---
    // 1. 공통 비활성화 제어
    &:disabled,
    &.btn--disabled {
        // 기본적으로 Filled/Tonal/Variant 통합 대응
        @include btn-disabled(var(--interaction-disabled));
    }

    // 2. 아웃라인 전용 비활성화
    &--outlined {

        &:disabled,
        &.btn--disabled {
            @include btn-disabled(transparent, 1px solid var(--interaction-disabled));
        }
    }

    // 3. 고스트 전용 비활성화
    &--ghost {

        &:disabled,
        &.btn--disabled {
            @include btn-disabled(transparent, none);
        }
    }

    // --- 로딩 ---
    &--loading,
    &[aria-busy="true"] {
        cursor: wait;
        pointer-events: none;
        position: relative;
        color: transparent !important;
        box-shadow: none !important;

        &::before,
        &::after {
            display: none !important; // 로딩 중 인터랙션 방지
        }

        // 로딩 애니메이션 컨테이너
        .btn__loading-animation {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 18px;
            height: 18px;
            z-index: 1;
        }

        // 사이즈별 로딩 애니메이션 크기 조정
        &.btn--medium .btn__loading-animation {
            width: 17px;
            height: 17px;
        }

        &.btn--small .btn__loading-animation {
            width: 16px;
            height: 16px;
        }
    }

    // --- 아이콘 ---
    &__leading-icon,
    &__trailing-icon {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        flex-shrink: 0;

        svg,
        img {
            width: 100%;
            height: 100%;
            display: block;
            fill: currentColor; // 색상 상속
        }
    }
}

@keyframes btn-spin {
    to {
        transform: rotate(360deg);
    }
}

/* 테스트 주석 */