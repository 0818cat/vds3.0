@import "../core/index";

.switch {
    display: inline-flex;
    align-items: center;
    position: relative;
    cursor: pointer;
    vertical-align: middle;
    user-select: none;
    -webkit-tap-highlight-color: transparent;

    // 숨김 처리된 실제 체크박스
    &__input {
        position: absolute;
        opacity: 0;
        width: 0;
        height: 0;
        margin: 0;
    }

    // 트랙 (배경)
    &__track {
        display: inline-block;
        position: relative;
        background-color: var(--refine-quinary, #D0D1D2);
        border-radius: var(--radius-full);
        transition: background-color 0.2s ease;
        flex-shrink: 0;

        // 썸 (동그라미)
        &::after {
            content: '';
            position: absolute;
            top: 2px;
            left: 2px;
            background-color: var(--static-white, #FFFFFF);
            border-radius: var(--radius-full);
            transition: transform 0.2s cubic-bezier(0.2, 0, 0, 1);
            @include elevation-ambient();
        }
    }

    // ---------------------------------------------------------------------------
    // Sizes
    // ---------------------------------------------------------------------------

    &--m &__track {
        width: 40px;
        height: 24px;

        &::after {
            width: 20px;
            height: 20px;
        }
    }

    &--s &__track {
        width: 32px;
        height: 20px;

        &::after {
            width: 16px;
            height: 16px;
        }
    }


    // ---------------------------------------------------------------------------
    // States
    // ---------------------------------------------------------------------------

    // Hover (Input Hover 상태) - 활성화 상태일 때만
    &:hover &__input:not(:disabled)+&__track {
        background-color: var(--refine-quaternary, #727476); // 좀 더 진한 회색
    }

    // Checked (On) 상태
    &__input:checked+&__track {
        background-color: var(--static-primary, #006EFF); // 토큰의 메인 블루
    }

    // Checked + Hover - 활성화 상태일 때만
    &:hover &__input:not(:disabled):checked+&__track {
        background-color: var(--static-secondary, #2483FF); // 인터랙션 블루
    }

    // 썸 이동 애니메이션 (Checked)
    &--m &__input:checked+&__track::after {
        transform: translateX(16px); // 40(전체) - 2(좌) - 20(썸) - 2(우여백) = 16px 이동
    }

    &--s &__input:checked+&__track::after {
        transform: translateX(12px); // 32(전체) - 2(좌) - 16(썸) - 2(우여백) = 12px 이동
    }

    // ---------------------------------------------------------------------------
    // Disabled States
    // ---------------------------------------------------------------------------

    &__input:disabled {
        cursor: not-allowed;
    }

    // 기본 비활성화 처리 (Checked/Unchecked 공통)
    &__input:disabled~&__track {
        cursor: not-allowed;
        opacity: 0.6; // 디자인 스펙: 기존 색상에서 60% 투명도

        &::after {
            box-shadow: none; // 비활성화 시 입체감 감쇄
        }
    }
}